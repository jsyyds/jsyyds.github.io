__NUXT_JSONP__("/blog/%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC){return {data:[{article:{slug:ag,description:"异步队列+requestAnimationFrame与页面绘制在事件循环中的顺序关系",title:ag,img:"https:\u002F\u002Fimages.unsplash.com\u002Fphoto-1416269223193-bc45028133f5?ixid=MnwxMjA3fDB8MHxzZWFyY2h8N3x8bG9vcHxlbnwwfHwwfHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",alt:ag,tags:[ah],toc:[{id:U,depth:J,text:U},{id:ap,depth:J,text:aq},{id:V,depth:J,text:V},{id:ar,depth:J,text:as},{id:at,depth:J,text:au},{id:W,depth:3,text:W}],body:{type:"root",children:[{type:b,tag:p,props:{},children:[{type:a,value:"事件循环算是面试必考题了，总是在事件循环里加入各种奇形怪状的事件。今天就来好好理一理这些事件的顺序关系。"}]},{type:a,value:i},{type:b,tag:K,props:{id:U},children:[{type:b,tag:D,props:{ariaHidden:z,href:"#%E5%95%A5%E6%98%AF%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF",tabIndex:E},children:[{type:b,tag:c,props:{className:[F,G]},children:[]}]},{type:a,value:U}]},{type:a,value:i},{type:b,tag:p,props:{},children:[{type:a,value:"学js的都知道，js是单线程的，由js引擎线程单独运行，所以它的性质决定在js（除web worker，和nodejs多进程）里，不会有真正的异步出现，连并发都不是，而是以事件轮询的方式执行微任务和宏任务："}]},{type:a,value:i},{type:b,tag:p,props:{},children:[{type:a,value:"举个栗子："}]},{type:a,value:i},{type:b,tag:L,props:{className:[M]},children:[{type:b,tag:N,props:{className:[O,P]},children:[{type:b,tag:Q,props:{},children:[{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:av}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,A,u]},children:[{type:a,value:B}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,n,v]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,m,j,l]},children:[{type:a,value:x}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:H}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:I}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aw}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:"new"}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,ax]},children:[{type:a,value:X}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,A,u]},children:[{type:a,value:B}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,n,v]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,m,j,l]},children:[{type:a,value:x}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"2"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:X}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"3"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,m,j,l]},children:[{type:a,value:aj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,ax]},children:[{type:a,value:ay}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,A,u]},children:[{type:a,value:B}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,n,v]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,m,j,l]},children:[{type:a,value:x}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:a,value:ay},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,n,v]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,m,j,l]},children:[{type:a,value:x}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"4"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:i}]}]}]},{type:a,value:i},{type:b,tag:p,props:{},children:[{type:a,value:"结果顺序输出：2, 4, 3, 1"}]},{type:a,value:i},{type:b,tag:p,props:{},children:[{type:a,value:"其中setTimeout是宏任务，promise是微任务，promise里的内容会立即执行，但是then方法指定的回调函数会在脚本同步任务执行完毕之后执行，而setTimeout等宏任务会等同步任务和微任务执行完毕之后最后执行。"}]},{type:a,value:i},{type:b,tag:p,props:{},children:[{type:a,value:"策略是轮询，先把同步任务调入主执行栈，执行完先找微任务，有就将微任务调入执行栈执行，没有就找宏任务。所以js中的异步并不是并发，而是滞后。"}]},{type:a,value:i},{type:b,tag:p,props:{},children:[{type:a,value:"下面我们来看看页面绘制与这些任务的顺序关系。"}]},{type:a,value:i},{type:b,tag:K,props:{id:ap},children:[{type:b,tag:D,props:{ariaHidden:z,href:"#%E7%AC%AC%E4%B8%80%E5%B8%A7%E9%87%8D%E7%BB%98%E4%B8%8E-promise-%E7%9A%84%E9%A1%BA%E5%BA%8F",tabIndex:E},children:[{type:b,tag:c,props:{className:[F,G]},children:[]}]},{type:a,value:aq}]},{type:a,value:i},{type:b,tag:p,props:{},children:[{type:a,value:"我们先来看一下代码的执行顺序。"}]},{type:a,value:i},{type:b,tag:L,props:{className:[M]},children:[{type:b,tag:N,props:{className:[O,P]},children:[{type:b,tag:Q,props:{},children:[{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:Y}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:C}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,_,$]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,m,j,l]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,m,j,l]},children:[{type:a,value:ae}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:af}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:I}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,n,v]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,m,j,l]},children:[{type:a,value:x}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:H}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:am}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:C}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:an}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,az,v]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,m,j,l]},children:[{type:a,value:X}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:H}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,m,j,l]},children:[{type:a,value:aj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,A,u]},children:[{type:a,value:B}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,s,R]},children:[{type:a,value:S}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:T},{type:b,tag:c,props:{className:[d,n,v]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,m,j,l]},children:[{type:a,value:x}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:i}]}]}]},{type:a,value:i},{type:b,tag:p,props:{},children:[{type:a,value:"我们预期是先执行同步的this.style.backgroundColor = 'black'将div设置成为黑色，然后再执行promise里面的死循环。但最终结果是控制台先输出1，然后再一直输出promise，并且div永远不会变成黑色,提前被promise里面的死循环阻塞了。也就是说，页面重绘是滞后于微任务的。"}]},{type:a,value:i},{type:b,tag:p,props:{},children:[{type:a,value:"我们再进行一个试验"}]},{type:a,value:i},{type:b,tag:K,props:{id:V},children:[{type:b,tag:D,props:{ariaHidden:z,href:"#%E9%A1%B5%E9%9D%A2%E9%87%8D%E7%BB%98%E4%B8%8E%E5%BE%AE%E4%BB%BB%E5%8A%A1%E3%80%81%E5%AE%8F%E4%BB%BB%E5%8A%A1%E7%9A%84%E9%A1%BA%E5%BA%8F",tabIndex:E},children:[{type:b,tag:c,props:{className:[F,G]},children:[]}]},{type:a,value:V}]},{type:a,value:i},{type:b,tag:L,props:{className:[M]},children:[{type:b,tag:N,props:{className:[O,P]},children:[{type:b,tag:Q,props:{},children:[{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:Y}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:C}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,_,$]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,m,j,l]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,m,j,l]},children:[{type:a,value:ae}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:af}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:I}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:av}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,A,u]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,s,R]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:T},{type:b,tag:c,props:{className:[d,n,v]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,m,j,l]},children:[{type:a,value:x}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:"'setTimeout'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:I}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aw}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:am}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:C}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:an}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:i}]}]}]},{type:a,value:i},{type:b,tag:p,props:{},children:[{type:a,value:"结果是div成功变成了黑色，控制台不停地输出setTimeout，所以总地来说，页面重绘是夹在微任务与宏任务中间。"}]},{type:a,value:i},{type:b,tag:K,props:{id:ar},children:[{type:b,tag:D,props:{ariaHidden:z,href:"#requestanimationframe%E4%B8%8E%E9%A1%B5%E9%9D%A2%E9%87%8D%E7%BB%98%E7%9A%84%E9%A1%BA%E5%BA%8F",tabIndex:E},children:[{type:b,tag:c,props:{className:[F,G]},children:[]}]},{type:a,value:as}]},{type:a,value:i},{type:b,tag:p,props:{},children:[{type:a,value:"mdn文档上说它是在每一次重绘前执行的。"}]},{type:a,value:i},{type:b,tag:L,props:{className:[M]},children:[{type:b,tag:N,props:{className:[O,P]},children:[{type:b,tag:Q,props:{},children:[{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:Y}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:C}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,_,$]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,m,j,l]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,m,j,l]},children:[{type:a,value:ae}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:af}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:I}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:am}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:C}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:an}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,A,u]},children:[{type:a,value:B}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,s,R]},children:[{type:a,value:S}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:H}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:T},{type:b,tag:c,props:{className:[d,n,v]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,m,j,l]},children:[{type:a,value:x}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:i}]}]}]},{type:a,value:i},{type:b,tag:p,props:{},children:[{type:a,value:"结果是不变黑，也就是表明其确实是在重绘之前执行"}]},{type:a,value:i},{type:b,tag:K,props:{id:at},children:[{type:b,tag:D,props:{ariaHidden:z,href:"#requestanimationframe%E4%B8%8Epromise%E7%9A%84%E9%A1%BA%E5%BA%8F",tabIndex:E},children:[{type:b,tag:c,props:{className:[F,G]},children:[]}]},{type:a,value:au}]},{type:a,value:i},{type:b,tag:L,props:{className:[M]},children:[{type:b,tag:N,props:{className:[O,P]},children:[{type:b,tag:Q,props:{},children:[{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:Y}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:C}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,_,$]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,m,j,l]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,m,j,l]},children:[{type:a,value:ae}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:af}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:I}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,A,u]},children:[{type:a,value:B}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,s,R]},children:[{type:a,value:S}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:H}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:T},{type:b,tag:c,props:{className:[d,n,v]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,m,j,l]},children:[{type:a,value:x}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,az,v]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,m,j,l]},children:[{type:a,value:X}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:H}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,m,j,l]},children:[{type:a,value:aj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,A,u]},children:[{type:a,value:B}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,s,R]},children:[{type:a,value:S}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:T},{type:b,tag:c,props:{className:[d,n,v]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,m,j,l]},children:[{type:a,value:x}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:i}]}]}]},{type:a,value:i},{type:b,tag:p,props:{},children:[{type:a,value:"控制台一直打印 promise，也就是说，滞后于 promise。"}]},{type:a,value:i},{type:b,tag:p,props:{},children:[{type:a,value:"所以我们就可以知道执行的优先度了"}]},{type:a,value:i},{type:b,tag:"h3",props:{id:W},children:[{type:b,tag:D,props:{ariaHidden:z,href:"#%E7%BB%93%E8%AE%BA",tabIndex:E},children:[{type:b,tag:c,props:{className:[F,G]},children:[]}]},{type:a,value:W}]},{type:a,value:i},{type:b,tag:p,props:{},children:[{type:b,tag:"strong",props:{},children:[{type:a,value:"同步任务\u003Epromise等微任务\u003ErequestAnimationFrame\u003E第一帧重绘完成\u003EsetTimeout等宏任务"}]}]},{type:a,value:i},{type:b,tag:p,props:{},children:[{type:a,value:"通过这个优先度可以去理解很多玄学的东西。"}]}]},dir:"\u002Farticles",path:"\u002Farticles\u002F事件循环",extension:".md",createdAt:"2021-06-02T02:46:17.252Z",updatedAt:"2021-06-02T03:18:09.271Z"},tags:{javascript:{slug:ah,name:ah}},prev:{slug:"JS_中的_new_做了什么？",title:"JS 中的 new 做了什么？"},next:{slug:"canvas_实现随机例子特效",title:"canvas 实现随机粒子特效"}}],fetch:[],mutations:void 0}}("text","element","span","token","punctuation","(",")"," ","\n","function",".","property-access","method","console","\n  ","p","{","}","keyword","string","operator","class-name","number","log","\n    ","true","arrow","=\u003E","=","a",-1,"icon","icon-link","1",",",2,"h2","div","nuxt-content-highlight","pre","language-js","line-numbers","code","control-flow","while","\n      ","啥是事件循环","页面重绘与微任务、宏任务的顺序","结论","resolve","const"," div ","dom","variable","document","querySelector","'div'","\ndiv","addEventListener","'click'","事件循环","javascript","Promise","then","this","style","backgroundColor","'black'","boolean","第一帧重绘与-promise-的顺序","第一帧重绘与 promise 的顺序","requestanimationframe与页面重绘的顺序","requestAnimationFrame与页面重绘的顺序","requestanimationframe与promise的顺序","requestAnimationFrame与promise的顺序","setTimeout","0","parameter","res","known-class-name","'promise'","requestAnimationFrame","'requestAnimationFrame'")));