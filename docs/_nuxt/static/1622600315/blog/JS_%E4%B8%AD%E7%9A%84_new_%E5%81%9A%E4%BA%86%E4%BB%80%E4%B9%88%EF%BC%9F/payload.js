__NUXT_JSONP__("/blog/JS_%E4%B8%AD%E7%9A%84_new_%E5%81%9A%E4%BA%86%E4%BB%80%E4%B9%88%EF%BC%9F", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao){return {data:[{article:{slug:"JS_中的_new_做了什么？",description:"What happened?",title:P,img:"https:\u002F\u002Fimages.unsplash.com\u002Fphoto-1598705352140-be8e33a97d55?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MzF8fGNyZWF0ZXxlbnwwfHwwfHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",alt:P,tags:[G],toc:[{id:Q,depth:R,text:"当 new Foo() 时发生了什么"},{id:S,depth:R,text:T}],body:{type:"root",children:[{type:b,tag:x,props:{},children:[{type:a,value:"面试遇到了这个问题，有印象但是记不清了，回答的模棱两可，自己也感觉不满意，重新复习一下。"}]},{type:a,value:g},{type:b,tag:U,props:{id:Q},children:[{type:b,tag:V,props:{ariaHidden:W,href:"#%E5%BD%93-new-foo-%E6%97%B6%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88",tabIndex:X},children:[{type:b,tag:c,props:{className:[Y,Z]},children:[]}]},{type:a,value:"当 "},{type:b,tag:o,props:{},children:[{type:a,value:_}]},{type:a,value:" 时发生了什么"}]},{type:a,value:g},{type:b,tag:x,props:{},children:[{type:a,value:"根据 MDN 的描述，当代码 "},{type:b,tag:o,props:{},children:[{type:a,value:"new Foo(...)"}]},{type:a,value:" 执行时，会发生以下事情："}]},{type:a,value:g},{type:b,tag:"ol",props:{},children:[{type:a,value:g},{type:b,tag:H,props:{},children:[{type:a,value:"一个继承自 "},{type:b,tag:o,props:{},children:[{type:a,value:"Foo.prototype"}]},{type:a,value:" 的新对象被创建。"}]},{type:a,value:g},{type:b,tag:H,props:{},children:[{type:a,value:"使用指定的参数调用构造函数 "},{type:b,tag:o,props:{},children:[{type:a,value:$}]},{type:a,value:"，并将 "},{type:b,tag:o,props:{},children:[{type:a,value:u}]},{type:a,value:" 绑定到新创建的对象。"},{type:b,tag:o,props:{},children:[{type:a,value:"new Foo"}]},{type:a,value:" 等同于 "},{type:b,tag:o,props:{},children:[{type:a,value:_}]},{type:a,value:"，也就是没有指定参数列表，"},{type:b,tag:o,props:{},children:[{type:a,value:$}]},{type:a,value:" 不带任何参数调用的情况。"}]},{type:a,value:g},{type:b,tag:H,props:{},children:[{type:a,value:"由构造函数返回的对象就是 "},{type:b,tag:o,props:{},children:[{type:a,value:aa}]},{type:a,value:" 表达式的结果。如果构造函数没有显式返回一个对象，则使用步骤1创建的对象。（一般情况下，构造函数不返回值，但是用户可以选择主动返回对象，来覆盖正常的对象创建步骤）"}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:x,props:{},children:[{type:a,value:"展示在代码中大概就是这样："}]},{type:a,value:g},{type:b,tag:ab,props:{className:[ac]},children:[{type:b,tag:ad,props:{className:[ae,af]},children:[{type:b,tag:o,props:{},children:[{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ag}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:k}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:b,tag:c,props:{className:[d,I]},children:[{type:a,value:v}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:ah}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"\u002F\u002F 1. 创建一个对象，赋予 this，这一步是隐性的"}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"\u002F\u002F let this = {}"}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,A,q]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,s,k,j]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"__proto__"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"==="}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:B}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"\u002F\u002F 2. 给 this 指向的对象赋予构造属性"}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:y}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:t}]},{type:a,value:aj},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ak}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:t}]},{type:a,value:" age\n\n  "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"\u002F\u002F 3. 如果没有手动返回对象，则默认返回 this 指向的这个对象，这一步也是隐性的"}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"\u002F\u002F return this"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:C}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:al}]},{type:a,value:am},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aa}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:U,props:{id:S},children:[{type:b,tag:V,props:{ariaHidden:W,href:"#%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84-new-%E6%96%B9%E6%B3%95",tabIndex:X},children:[{type:b,tag:c,props:{className:[Y,Z]},children:[]}]},{type:a,value:T}]},{type:a,value:g},{type:b,tag:x,props:{},children:[{type:a,value:"根据上面的描述，我们可以简单实现一个 new 方法："}]},{type:a,value:g},{type:b,tag:ab,props:{className:[ac]},children:[{type:b,tag:ad,props:{className:[ae,af]},children:[{type:b,tag:o,props:{},children:[{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ag}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:k}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:b,tag:c,props:{className:[d,I]},children:[{type:a,value:v}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:ah}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:y}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:t}]},{type:a,value:aj},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ak}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:t}]},{type:a,value:" age\n"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:C}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,"method-variable","function-variable",s,k,j]},children:[{type:a,value:an}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,A,q]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,s,k,j]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:C}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"\u002F\u002F 自己定义的 new 方法"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:k}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,J]},children:[{type:b,tag:c,props:{className:[d,M,q]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,"spread",r]},children:[{type:a,value:"..."}]},{type:a,value:"args"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"\u002F\u002F 1. 以构造函数的 prototype 属性为原型，创建新对象"}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"let"}]},{type:a,value:" obj "},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,M,q]},children:[{type:a,value:"Object"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,s,k,j]},children:[{type:a,value:"create"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"\u002F\u002F 2. 将 this 和调用参数传给构造函数执行"}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,M,q]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,s,k,j]},children:[{type:a,value:"apply"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:"obj"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:" args"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"\u002F\u002F 3. 返回步骤1创建的对象"}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,l,"control-flow"]},children:[{type:a,value:"return"}]},{type:a,value:" obj\n"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:C}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"\u002F\u002F 创建实例，将构造函数 Person 和参数传入"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:al}]},{type:a,value:am},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,I]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:"'Tom'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,"number"]},children:[{type:a,value:"26"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:F},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,s,k,j]},children:[{type:a,value:an}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"\u002F\u002F 'Tom'"}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"\u002F\u002F 最后检验，与使用 new 的效果相同"}]},{type:a,value:"\nperson1 "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"instanceof"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:v}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:B}]},{type:a,value:F},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,s,k,j]},children:[{type:a,value:O}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:"'name'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:B}]},{type:a,value:F},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,s,k,j]},children:[{type:a,value:O}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:"'age'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:B}]},{type:a,value:F},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,s,k,j]},children:[{type:a,value:O}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:"'sayName'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"\u002F\u002F false"}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:x,props:{},children:[{type:a,value:"到这里就结束了，文章很短但是值得经常复习回顾。"}]}]},dir:"\u002Farticles",path:"\u002Farticles\u002FJS_中的_new_做了什么？",extension:".md",createdAt:"2021-06-02T01:30:07.352Z",updatedAt:"2021-06-02T02:06:44.590Z"},tags:{javascript:{slug:G,name:G}},prev:{slug:"Vue_响应性原理实现",title:"Vue 响应性原理实现"},next:null}],fetch:[],mutations:void 0}}("text","element","span","token","punctuation"," ","\n","comment",".","property-access","function","keyword","(",")","code","\n  ","class-name","operator","method","=","this","Person",",","p","name","{","console","\u002F\u002F true","}","\n\n","string","\nperson1","javascript","li","maybe-class-name","parameter","prototype","\n\n  ","known-class-name","Function","hasOwnProperty","JS 中的 new 做了什么？","当-new-foo-时发生了什么",2,"实现一个简单的-new-方法","实现一个简单的 new 方法","h2","a","true",-1,"icon","icon-link","new Foo()","Foo","new","div","nuxt-content-highlight","pre","language-js","line-numbers","\u002F\u002F 构造函数"," age","log"," name\n  ","age","const"," person1 ","sayName","newMethod")));